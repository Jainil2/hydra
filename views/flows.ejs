<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Flow Runner</title>
    <link rel="stylesheet" href="/flows.css" />
  </head>
  <body>
    <h1>Hydra Flow Runner</h1>
  <%- include('partials/navbar') %>
    <div class="container">
      <section>
        <h2>Authorize (Auth Code)</h2>
        <div class="row">
          <label>Client ID: <input id="client_id" value="demo-client" /></label>
          <label>Client Secret (optional): <input id="client_secret" placeholder="leave blank for public clients" /></label>
          <label>Redirect URI: <input id="redirect_uri" value="http://localhost:3000/result" /></label>
          <label>Scope: <input id="scope" value="openid offline" /></label>
        </div>
        <div class="row">
          <button id="start_auth" class="btn primary">Start Auth (open)</button>
          <a class="btn" href="/oauth/callback" target="_blank">Callback page</a>
        </div>
      </section>

      <section>
        <h2>PKCE</h2>
        <div class="row">
          <label>Client ID (PKCE): <input id="pkce_client_id" value="demo-client" /></label>
          <label>Client Secret (PKCE, optional): <input id="pkce_client_secret" placeholder="leave blank for public clients" /></label>
          <label>Redirect URI (PKCE): <input id="pkce_redirect_uri" value="http://localhost:3000/result" /></label>
        </div>
        <div class="row">
          <button id="generate_pkce" class="btn primary">Generate PKCE & Open</button>
          <button id="pkce_copy" class="btn">Copy Verifier</button>
        </div>
        <pre id="pkce_info" class="output"></pre>
      </section>

      <section>
        <h2>Token Tools</h2>
        <div class="row">
          <label>Token: <input id="token_input" class="wide" /></label>
        </div>
        <div class="row">
          <button id="decode_token" class="btn">Decode</button>
          <button id="verify_token" class="btn">Verify</button>
          <button id="copy_token" class="btn">Copy Token</button>
        </div>
        <pre id="token_output" class="output"></pre>
      </section>

      <section>
        <h2>Introspection / Revoke</h2>
        <div class="row">
          <label>Client ID: <input id="introspect_client_id" value="demo-client" /></label>
          <label>Client Secret: <input id="introspect_client_secret" value="secret" /></label>
        </div>
        <div class="row">
          <label>Token: <input id="introspect_token" class="wide" /></label>
        </div>
        <div class="row">
          <button id="introspect_btn" class="btn">Introspect</button>
          <button id="revoke_btn" class="btn">Revoke</button>
          <button id="copy_introspect" class="btn">Copy Result</button>
        </div>
        <pre id="introspect_output" class="output"></pre>
      </section>
    </div>

    <div id="toast" class="toast" style="display:none"></div>
    <script src="/flows.js"></script>
  </body>
</html>
